import{Directive,Component,ContentChild,ElementRef,EventEmitter,forwardRef,HostBinding,HostListener,Input,IterableDiffers,Optional,Output,TemplateRef,ViewChild,NgModule}from"@angular/core";import{NG_VALUE_ACCESSOR}from"@angular/forms";import{Form,Item,ModalController,Platform,Content,NavParams,IonicPageModule}from"ionic-angular";import"rxjs";import{CommonModule}from"@angular/common";class IonicSelectableAddItemTemplateDirective{}IonicSelectableAddItemTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableAddItemTemplate]"}]}],IonicSelectableAddItemTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableCloseButtonTemplateDirective{}IonicSelectableCloseButtonTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableCloseButtonTemplate]"}]}],IonicSelectableCloseButtonTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableGroupRightTemplateDirective{}IonicSelectableGroupRightTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableGroupRightTemplate]"}]}],IonicSelectableGroupRightTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableGroupTemplateDirective{}IonicSelectableGroupTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableGroupTemplate]"}]}],IonicSelectableGroupTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableItemRightTemplateDirective{}IonicSelectableItemRightTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableItemRightTemplate]"}]}],IonicSelectableItemRightTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableItemTemplateDirective{}IonicSelectableItemTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableItemTemplate]"}]}],IonicSelectableItemTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableMessageTemplateDirective{}IonicSelectableMessageTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableMessageTemplate]"}]}],IonicSelectableMessageTemplateDirective.ctorParameters=(()=>[]);class IonicSelectablePlaceholderTemplateDirective{}IonicSelectablePlaceholderTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectablePlaceholderTemplate]"}]}],IonicSelectablePlaceholderTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableSearchFailTemplateDirective{}IonicSelectableSearchFailTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableSearchFailTemplate]"}]}],IonicSelectableSearchFailTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableTitleTemplateDirective{}IonicSelectableTitleTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableTitleTemplate]"}]}],IonicSelectableTitleTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableValueTemplateDirective{}IonicSelectableValueTemplateDirective.decorators=[{type:Directive,args:[{selector:"[ionicSelectableValueTemplate]"}]}],IonicSelectableValueTemplateDirective.ctorParameters=(()=>[]);class IonicSelectableComponent{constructor(e,t,n,i,s,l){this._modalController=e,this.ionForm=t,this._platform=n,this.ionItem=i,this._iterableDiffers=s,this.element=l,this._cssClass=!0,this._isOnSearchEnabled=!0,this._isEnabled=!0,this._isBackdropCloseEnabled=!0,this._isOpened=!1,this._valueItems=[],this._value=null,this._canClear=!1,this._hasOkButton=!1,this._isMultiple=!1,this._canAddItem=!1,this.onItemsChange=new EventEmitter,this._searchText="",this._hasSearchText=!1,this._groups=[],this._itemsToConfirm=[],this._selectedItems=[],this._filteredGroups=[],this._isAddItemTemplateVisible=!1,this._isFooterVisible=!0,this._itemToAdd=null,this._footerButtonsCount=0,this._hasFilteredItems=!1,this.items=[],this.itemsChange=new EventEmitter,this.isOkButtonEnabled=!0,this.itemValueField=null,this.itemTextField=null,this.groupValueField=null,this.groupTextField=null,this.canSearch=!1,this.hasInfiniteScroll=!1,this.hasVirtualScroll=!1,this.virtualScrollApproxItemHeight="40px",this.virtualScrollApproxItemWidth="100%",this.virtualScrollBufferRatio=3,this.virtualScrollHeaderFn=(()=>null),this.searchPlaceholder="Search",this.placeholder=null,this.searchFailText="No items found.",this.clearButtonText="Clear",this.addButtonText="Add",this.okButtonText="OK",this.closeButtonText="Cancel",this.focusSearchbar=!1,this.headerColor=null,this.groupColor=null,this.onChange=new EventEmitter,this.onSearch=new EventEmitter,this.onSearchFail=new EventEmitter,this.onSearchSuccess=new EventEmitter,this.onInfiniteScroll=new EventEmitter,this.onOpen=new EventEmitter,this.onClose=new EventEmitter,this.onSelect=new EventEmitter,this.onClear=new EventEmitter,this.searchDebounce=250,this.disabledItems=[],this.shouldStoreItemValue=!1,this.canSaveItem=!1,this.canDeleteItem=!1,this.onSaveItem=new EventEmitter,this.onDeleteItem=new EventEmitter,this.onAddItem=new EventEmitter,this.propagateOnChange=(e=>{}),this.propagateOnTouched=(()=>{}),this.items&&this.items.length||(this.items=[]),this._itemsDiffer=this._iterableDiffers.find(this.items).create()}get _isMultipleCssClass(){return this.isMultiple}get _hasValueCssClass(){return this.hasValue()}get _hasPlaceholderCssClass(){return this._hasPlaceholder}get _shouldStoreItemValue(){return this.shouldStoreItemValue&&this._hasObjects}get searchText(){return this._searchText}set searchText(e){this._searchText=e,this._setHasSearchText()}get isSearching(){return this._isSearching}get hasSearchText(){return this._hasSearchText}get value(){return this._value}set value(e){this._value=e,this._valueItems.splice(0,this._valueItems.length),this.isMultiple?e&&e.length&&Array.prototype.push.apply(this._valueItems,e):this._isNullOrWhiteSpace(e)||this._valueItems.push(e),this._setIonItemHasValue(),this._setHasPlaceholder()}get isEnabled(){return this._isEnabled}set isEnabled(e){this._isEnabled=!!e,this.enableIonItem(this._isEnabled)}get isBackdropCloseEnabled(){return this._isBackdropCloseEnabled}set isBackdropCloseEnabled(e){this._isBackdropCloseEnabled=!!e}get isOpened(){return this._isOpened}get hasOkButton(){return this._hasOkButton}set hasOkButton(e){this._hasOkButton=!!e,this._countFooterButtons()}get isOnSearchEnabled(){return this._isOnSearchEnabled}set isOnSearchEnabled(e){this._isOnSearchEnabled=!!e}get canClear(){return this._canClear}set canClear(e){this._canClear=!!e,this._countFooterButtons()}get isMultiple(){return this._isMultiple}set isMultiple(e){this._isMultiple=!!e,this._countFooterButtons()}get itemsToConfirm(){return this._itemsToConfirm}get canAddItem(){return this._canAddItem}set canAddItem(e){this._canAddItem=!!e,this._countFooterButtons()}initFocus(){}enableIonItem(e){this.ionItem&&this.ionItem.setElementClass("item-input-disabled",!e)}_click(e){this.isEnabled&&0!==e.detail&&(this._labelText=this._getLabelText(),e.preventDefault(),e.stopPropagation(),this.open().then(()=>{this.onOpen.emit({component:this})}))}_isNullOrWhiteSpace(e){return null==e||e.toString().replace(/\s/g,"").length<1}_setHasSearchText(){this._hasSearchText=!this._isNullOrWhiteSpace(this._searchText)}_hasOnSearch(){return this.isOnSearchEnabled&&this.onSearch.observers.length>0}_hasOnSaveItem(){return this.canSaveItem&&this.onSaveItem.observers.length>0}_hasOnAddItem(){return this.canAddItem&&this.onAddItem.observers.length>0}_hasOnDeleteItem(){return this.canDeleteItem&&this.onDeleteItem.observers.length>0}_select(e){this.value=e,this._emitValueChange()}_emitValueChange(){this.propagateOnChange(this.value),this._setIonItemValidityClasses(),this.onChange.emit({component:this,value:this.value})}_emitSearch(){this.canSearch&&this.onSearch.emit({component:this,text:this._searchText})}_emitOnSelect(e,t){this.onSelect.emit({component:this,item:e,isSelected:t})}_emitOnClear(e){this.onClear.emit({component:this,items:e})}_emitOnSearchSuccessOrFail(e){const t={component:this,text:this._searchText};e?this.onSearchSuccess.emit(t):this.onSearchFail.emit(t)}_formatItem(e){return this._isNullOrWhiteSpace(e)?null:this.itemTextField?e[this.itemTextField]:e.toString()}_getLabelText(){let e=this.ionItem?this.ionItem.getNativeElement().querySelector("ion-label"):null;return e?e.textContent:null}_getItemValue(e){return this._hasObjects?e[this.itemValueField]:e}_getStoredItemValue(e){return this._hasObjects?this._shouldStoreItemValue?e:e[this.itemValueField]:e}_filterItems(){if(this._setHasSearchText(),this._hasOnSearch())this._emitSearch();else{let e=[];if(this._searchText&&this._searchText.trim()){let t=this._searchText.trim().toLowerCase();this._groups.forEach(n=>{let i=n.items.filter(e=>{return-1!==(this.itemTextField?e[this.itemTextField]:e).toString().toLowerCase().indexOf(t)});i.length&&e.push({value:n.value,text:n.text,items:i})}),e.length||e.push({items:[]})}else e=this._groups;this._filteredGroups=e,this._hasFilteredItems=!this._areGroupsEmpty(e),this._emitOnSearchSuccessOrFail(this._hasFilteredItems)}}_isItemDisabled(e){if(this.disabledItems)return this.disabledItems.some(t=>this._getItemValue(t)===this._getItemValue(e))}_isItemSelected(e){return void 0!==this._selectedItems.find(t=>this._getItemValue(e)===this._getStoredItemValue(t))}_addSelectedItem(e){this._shouldStoreItemValue?this._selectedItems.push(this._getItemValue(e)):this._selectedItems.push(e)}_deleteSelectedItem(e){let t;this._selectedItems.forEach((n,i)=>{this._getItemValue(e)===this._getStoredItemValue(n)&&(t=i)}),this._selectedItems.splice(t,1)}_saveItem(e,t){e.stopPropagation(),this._itemToAdd=t,this._hasOnSaveItem()?this.onSaveItem.emit({component:this,item:this._itemToAdd}):this.showAddItemTemplate()}_deleteItemClick(e,t){e.stopPropagation(),this._itemToAdd=t,this._hasOnDeleteItem()?this.onDeleteItem.emit({component:this,item:this._itemToAdd}):this.deleteItem(this._itemToAdd)}_addItemClick(){this._itemToAdd=null,this._hasOnAddItem()?this.onAddItem.emit({component:this}):this.showAddItemTemplate()}_countFooterButtons(){let e=0;this.canClear&&e++,(this.isMultiple||this._hasOkButton)&&e++,this.canAddItem&&e++,this._footerButtonsCount=e}_areGroupsEmpty(e){return 0===e.length||e.every(e=>!e.items||0===e.items.length)}_setItems(e){let t=[{items:e||[]}];e&&e.length&&this._hasGroups&&(t=[],e.forEach(e=>{let n=this._getPropertyValue(e,this.groupValueField),i=t.find(e=>e.value===n);i?i.items.push(e):t.push({value:n,text:this._getPropertyValue(e,this.groupTextField),items:[e]})})),this._groups=t,this._filteredGroups=this._groups,this._hasFilteredItems=!this._areGroupsEmpty(this._filteredGroups)}_formatValueItem(e){if(this._shouldStoreItemValue){let t=this.items.find(t=>t[this.itemValueField]===e);return this._formatItem(t)}return this._formatItem(e)}_getPropertyValue(e,t){return t?t.split(".").reduce((e,t)=>e?e[t]:null,e):null}_setIonItemHasFocus(e){this.ionItem&&this.ionItem.setElementClass("item-input-has-focus",e)}_setIonItemHasValue(){this.ionItem&&this.ionItem.setElementClass("item-input-has-value",this.hasValue())}_setHasPlaceholder(){this._hasPlaceholder=!(this.hasValue()||this._isNullOrWhiteSpace(this.placeholder)&&!this.placeholderTemplate)}_setIonItemValidityClasses(){this.ionItem&&requestAnimationFrame(()=>{let e=this.element.nativeElement.classList;this.ionItem.setElementClass("ng-invalid",!1),this.ionItem.setElementClass("ng-valid",!1),this.ionItem.setElementClass("ng-touched",!1),this.ionItem.setElementClass("ng-untouched",!1),this.ionItem.setElementClass("ng-dirty",!1),this.ionItem.setElementClass("ng-pristine",!1),e.forEach(e=>{"ng-invalid"===e&&this.ionItem.setElementClass("ng-invalid",!0),"ng-valid"===e&&this.ionItem.setElementClass("ng-valid",!0),"ng-touched"===e&&this.ionItem.setElementClass("ng-touched",!0),"ng-untouched"===e&&this.ionItem.setElementClass("ng-untouched",!0),"ng-dirty"===e&&this.ionItem.setElementClass("ng-dirty",!0),"ng-pristine"===e&&this.ionItem.setElementClass("ng-pristine",!0)})})}_toggleAddItemTemplate(e){this.addItemTemplate&&(this._isAddItemTemplateVisible=e,this._isFooterVisible=!e)}writeValue(e){this.value=e,this._setIonItemValidityClasses()}registerOnChange(e){this.propagateOnChange=e}registerOnTouched(e){this.propagateOnTouched=e}setDisabledState(e){this.isEnabled=!e}ngOnInit(){this._isIos=this._platform.is("ios"),this._isMD=!this._isIos,this._hasObjects=!this._isNullOrWhiteSpace(this.itemValueField),this._hasGroups=Boolean(this._hasObjects&&this.groupValueField&&!this.hasVirtualScroll),this.ionForm.register(this),this.ionItem&&(this.ionItem.setElementClass("item-input",!0),this.ionItem.setElementClass("item-ionic-selectable",!0)),this.enableIonItem(this.isEnabled)}ngOnDestroy(){this.ionForm.deregister(this)}ngDoCheck(){this._itemsDiffer.diff(this.items)&&(this._setItems(this.items),this.value=this.value,this.onItemsChange.emit({component:this}))}addItem(e){let t=this;return this.items.unshift(e),this._addItemObservable&&this._addItemObservable.unsubscribe(),new Promise(function(e,n){t._addItemObservable=t.onItemsChange.asObservable().subscribe(()=>{t._addItemObservable.unsubscribe(),e()},()=>{t._addItemObservable.unsubscribe(),n()})})}deleteItem(e){let t=this,n=!1;if(this._selectedItems&&(this._selectedItems=this._selectedItems.filter(t=>this._getItemValue(e)!==this._getStoredItemValue(t))),this.value)if(this.isMultiple){let t=this.value.filter(t=>t.id!==e.id);t.length!==this.value.length&&(this.value=t,n=!0)}else e===this.value&&(this.value=null,n=!0);n&&this._emitValueChange();let i=this.items.filter(t=>t.id!==e.id);return this.itemsChange.emit(i),this._setItems(i),this.onItemsChange.emit({component:this}),this._deleteItemObservable&&this._deleteItemObservable.unsubscribe(),new Promise(function(e,n){t._deleteItemObservable=t.onItemsChange.asObservable().subscribe(()=>{t._deleteItemObservable.unsubscribe(),e()},()=>{t._deleteItemObservable.unsubscribe(),n()})})}hasValue(){return this.isMultiple?0!==this._valueItems.length:0!==this._valueItems.length&&!this._isNullOrWhiteSpace(this._valueItems[0])}open(){let e=this;return new Promise(function(t,n){e._isEnabled&&!e._isOpened?(e._filterItems(),e._isOpened=!0,e._modal=e._modalController.create(IonicSelectablePageComponent,{selectComponent:e},{enableBackdropDismiss:e._isBackdropCloseEnabled}),e._modal.present().then(()=>{e._setIonItemHasFocus(!0),t()}),e._modal.onWillDismiss(()=>{e._setIonItemHasFocus(!1)}),e._modal.onDidDismiss((t,n)=>{e._isOpened=!1,e._itemsToConfirm=[],"backdrop"===n&&e.onClose.emit({component:e})})):n("IonicSelectable is disabled or already opened.")})}close(){let e=this;return new Promise(function(t,n){e._isEnabled&&e._isOpened?(e.propagateOnTouched(),e._setIonItemValidityClasses(),e._infiniteScroll=null,e._isOpened=!1,e._itemToAdd=null,e._modal.dismiss().then(()=>{e._setIonItemHasFocus(!1),e.hideAddItemTemplate(),t()})):n("IonicSelectable is disabled or already closed.")})}clear(){this.value=this.isMultiple?[]:null,this._itemsToConfirm=[],this.propagateOnChange(this.value),this._setIonItemValidityClasses()}scrollToTop(){let e=this;return new Promise(function(t,n){e._isOpened?e._selectPageComponent._content.scrollToTop().then(()=>{t()}):n("IonicSelectable content cannot be scrolled.")})}scrollToBottom(){let e=this;return new Promise(function(t,n){e._isOpened?e._selectPageComponent._content.scrollToBottom().then(()=>{t()}):n("IonicSelectable content cannot be scrolled.")})}startSearch(){this._isEnabled&&this.showLoading()}endSearch(){this._isEnabled&&(this.hideLoading(),this._setItems(this.items),this._emitOnSearchSuccessOrFail(this._hasFilteredItems))}enableInfiniteScroll(){this._isEnabled&&this._infiniteScroll&&this._infiniteScroll.enable(!0)}disableInfiniteScroll(){this._isEnabled&&this._infiniteScroll&&this._infiniteScroll.enable(!1)}endInfiniteScroll(){this._isEnabled&&this._infiniteScroll&&(this._infiniteScroll.complete(),this._setItems(this.items))}search(e){this._isEnabled&&this._isOpened&&this.canSearch&&(this._searchText=e,this._setHasSearchText(),this._filterItems())}showLoading(){this._isEnabled&&(this._isSearching=!0)}hideLoading(){this._isEnabled&&(this._isSearching=!1)}showAddItemTemplate(){this._toggleAddItemTemplate(!0)}hideAddItemTemplate(){this._toggleAddItemTemplate(!1)}}IonicSelectableComponent.decorators=[{type:Component,args:[{selector:"ionic-selectable",template:'<div class="ionic-selectable-value">\n  <div *ngIf="valueTemplate && _valueItems.length && isMultiple"\n    [ngTemplateOutlet]="valueTemplate" [ngTemplateOutletContext]="{ value: _valueItems }">\n  </div>\n  <div class="ionic-selectable-value-item" *ngIf="valueTemplate && _valueItems.length && !isMultiple">\n    <div [ngTemplateOutlet]="valueTemplate" [ngTemplateOutletContext]="{ value: _valueItems[0] }">\n    </div>\n  </div>\n  <span *ngIf="!valueTemplate && _valueItems.length">\n    <div class="ionic-selectable-value-item" *ngFor="let valueItem of _valueItems">\n      {{_formatValueItem(valueItem)}}\n    </div>\n  </span>\n  <div *ngIf="_hasPlaceholder && placeholderTemplate" class="ionic-selectable-value-item">\n    <div [ngTemplateOutlet]="placeholderTemplate">\n    </div>\n  </div>\n  <div class="ionic-selectable-value-item" *ngIf="_hasPlaceholder && !placeholderTemplate">\n    {{placeholder}}\n  </div>\n</div>\n<div class="ionic-selectable-icon">\n  <div class="ionic-selectable-icon-inner"></div>\n</div>\n<button aria-haspopup="true" ion-button="item-cover" class="item-cover"\n  [disabled]="!isEnabled">\n</button>\n',providers:[{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>IonicSelectableComponent),multi:!0}]}]}],IonicSelectableComponent.ctorParameters=(()=>[{type:ModalController},{type:Form},{type:Platform},{type:Item,decorators:[{type:Optional}]},{type:IterableDiffers},{type:ElementRef}]),IonicSelectableComponent.propDecorators={_cssClass:[{type:HostBinding,args:["class.ionic-selectable"]}],_isIos:[{type:HostBinding,args:["class.ionic-selectable-ios"]}],_isMD:[{type:HostBinding,args:["class.ionic-selectable-md"]}],_isMultipleCssClass:[{type:HostBinding,args:["class.ionic-selectable-is-multiple"]}],_hasValueCssClass:[{type:HostBinding,args:["class.ionic-selectable-has-value"]}],_hasPlaceholderCssClass:[{type:HostBinding,args:["class.ionic-selectable-has-placeholder"]}],items:[{type:Input}],itemsChange:[{type:Output}],isEnabled:[{type:HostBinding,args:["class.ionic-selectable-is-enabled"]},{type:Input,args:["isEnabled"]}],isBackdropCloseEnabled:[{type:Input,args:["isBackdropCloseEnabled"]}],isOkButtonEnabled:[{type:Input,args:["isOkButtonEnabled"]}],hasOkButton:[{type:Input,args:["hasOkButton"]}],itemValueField:[{type:Input}],itemTextField:[{type:Input}],groupValueField:[{type:Input}],groupTextField:[{type:Input}],canSearch:[{type:Input}],isOnSearchEnabled:[{type:Input,args:["isOnSearchEnabled"]}],canClear:[{type:HostBinding,args:["class.ionic-selectable-can-clear"]},{type:Input,args:["canClear"]}],hasInfiniteScroll:[{type:Input}],hasVirtualScroll:[{type:Input}],virtualScrollApproxItemHeight:[{type:Input}],virtualScrollApproxItemWidth:[{type:Input}],virtualScrollBufferRatio:[{type:Input}],virtualScrollHeaderFn:[{type:Input}],searchPlaceholder:[{type:Input}],placeholder:[{type:Input}],isMultiple:[{type:Input,args:["isMultiple"]}],searchFailText:[{type:Input}],clearButtonText:[{type:Input}],addButtonText:[{type:Input}],okButtonText:[{type:Input}],closeButtonText:[{type:Input}],focusSearchbar:[{type:Input}],headerColor:[{type:Input}],groupColor:[{type:Input}],onChange:[{type:Output}],onSearch:[{type:Output}],onSearchFail:[{type:Output}],onSearchSuccess:[{type:Output}],onInfiniteScroll:[{type:Output}],onOpen:[{type:Output}],onClose:[{type:Output}],onSelect:[{type:Output}],onClear:[{type:Output}],valueTemplate:[{type:ContentChild,args:[IonicSelectableValueTemplateDirective,{read:TemplateRef}]}],itemTemplate:[{type:ContentChild,args:[IonicSelectableItemTemplateDirective,{read:TemplateRef}]}],itemRightTemplate:[{type:ContentChild,args:[IonicSelectableItemRightTemplateDirective,{read:TemplateRef}]}],titleTemplate:[{type:ContentChild,args:[IonicSelectableTitleTemplateDirective,{read:TemplateRef}]}],placeholderTemplate:[{type:ContentChild,args:[IonicSelectablePlaceholderTemplateDirective,{read:TemplateRef}]}],messageTemplate:[{type:ContentChild,args:[IonicSelectableMessageTemplateDirective,{read:TemplateRef}]}],groupTemplate:[{type:ContentChild,args:[IonicSelectableGroupTemplateDirective,{read:TemplateRef}]}],groupRightTemplate:[{type:ContentChild,args:[IonicSelectableGroupRightTemplateDirective,{read:TemplateRef}]}],closeButtonTemplate:[{type:ContentChild,args:[IonicSelectableCloseButtonTemplateDirective,{read:TemplateRef}]}],searchFailTemplate:[{type:ContentChild,args:[IonicSelectableSearchFailTemplateDirective,{read:TemplateRef}]}],addItemTemplate:[{type:ContentChild,args:[IonicSelectableAddItemTemplateDirective,{read:TemplateRef}]}],searchDebounce:[{type:Input}],disabledItems:[{type:Input}],shouldStoreItemValue:[{type:Input}],canSaveItem:[{type:Input}],canDeleteItem:[{type:Input}],canAddItem:[{type:Input,args:["canAddItem"]}],onSaveItem:[{type:Output}],onDeleteItem:[{type:Output}],onAddItem:[{type:Output}],_click:[{type:HostListener,args:["click",["$event"]]}]};class IonicSelectablePageComponent{constructor(e,t){this.navParams=e,this._element=t,this._cssClass=!0,this.selectComponent=this.navParams.get("selectComponent"),this.selectComponent._selectPageComponent=this,this.selectComponent._selectedItems=[],this.selectComponent._isNullOrWhiteSpace(this.selectComponent.value)||(this.selectComponent.isMultiple?this.selectComponent.value.forEach(e=>{this.selectComponent._selectedItems.push(e)}):this.selectComponent._selectedItems.push(this.selectComponent.value)),this._setItemsToConfirm(this.selectComponent._selectedItems)}get _canClearCssClass(){return this.selectComponent.canClear}get _isMultipleCssClass(){return this.selectComponent.isMultiple}get _isSearchingCssClass(){return this.selectComponent._isSearching}get _isAddItemTemplateVisibleCssClass(){return this.selectComponent._isAddItemTemplateVisible}get _isIos(){return this.selectComponent._isIos}_isMD(){return this.selectComponent._isMD}ngAfterViewInit(){this._header=this._element.nativeElement.querySelector("ion-header"),this._searchbarComponent&&this.selectComponent.focusSearchbar&&setTimeout(()=>{this._searchbarComponent.setFocus()},1e3)}_setItemsToConfirm(e){this.selectComponent._itemsToConfirm=[].concat(e)}_getMoreItems(e){this.selectComponent._infiniteScroll=e,this.selectComponent.onInfiniteScroll.emit({component:this.selectComponent,text:this.selectComponent._searchText})}_select(e){const t=this.selectComponent._isItemSelected(e);this.selectComponent.isMultiple?(t?this.selectComponent._deleteSelectedItem(e):this.selectComponent._addSelectedItem(e),this._setItemsToConfirm(this.selectComponent._selectedItems),this.selectComponent._emitOnSelect(e,!t)):this.selectComponent.hasOkButton?(this.selectComponent._selectedItems=[],t?this.selectComponent._deleteSelectedItem(e):this.selectComponent._addSelectedItem(e),this._setItemsToConfirm(this.selectComponent._selectedItems),this.selectComponent._emitOnSelect(e,!t)):(t||(this.selectComponent._selectedItems=[],this.selectComponent._addSelectedItem(e),this.selectComponent._emitOnSelect(e,!0),this.selectComponent._shouldStoreItemValue?this.selectComponent._select(this.selectComponent._getItemValue(e)):this.selectComponent._select(e)),this._close())}_ok(){this.selectComponent.isMultiple?this.selectComponent._select(this.selectComponent._selectedItems):this.selectComponent.hasOkButton&&this.selectComponent._select(this.selectComponent._selectedItems[0]||null),this._close()}_close(){this._searchbarComponent&&this._searchbarComponent._fireBlur(),setTimeout(()=>{this.selectComponent.close().then(()=>{this.selectComponent.onClose.emit({component:this.selectComponent})}),this.selectComponent._hasOnSearch()||(this.selectComponent._searchText="",this.selectComponent._setHasSearchText())})}_clear(){let e=this.selectComponent._selectedItems;this.selectComponent.clear(),this.selectComponent._emitValueChange(),this.selectComponent._emitOnClear(e),this.selectComponent.close().then(()=>{this.selectComponent.onClose.emit({component:this.selectComponent})})}}IonicSelectablePageComponent.decorators=[{type:Component,args:[{selector:"ionic-selectable-page",template:'<ion-header>\n  <ion-navbar [color]="selectComponent.headerColor ? selectComponent.headerColor : null">\n    <ion-title>\n      \x3c!-- Use span for titleTemplate to preserve Ionic ellipsis styles. --\x3e\n      <span *ngIf="selectComponent.titleTemplate" [ngTemplateOutlet]="selectComponent.titleTemplate">\n      </span>\n      <span *ngIf="!selectComponent.titleTemplate">\n        {{selectComponent._labelText}}\n      </span>\n    </ion-title>\n    <ion-buttons start>\n      <button ion-button (click)="_close()">\n        <span *ngIf="selectComponent.closeButtonTemplate" [ngTemplateOutlet]="selectComponent.closeButtonTemplate">\n        </span>\n        <span *ngIf="!selectComponent.closeButtonTemplate" ion-text showWhen="ios">\n          {{selectComponent.closeButtonText}}\n        </span>\n        <ion-icon *ngIf="!selectComponent.closeButtonTemplate" name="md-close"\n          hideWhen="ios">\n        </ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar *ngIf="selectComponent.canSearch || selectComponent.messageTemplate">\n    <ion-searchbar *ngIf="selectComponent.canSearch" #searchbarComponent\n      [(ngModel)]="selectComponent._searchText" (ionInput)="selectComponent._filterItems()"\n      [placeholder]="selectComponent.searchPlaceholder" [debounce]="selectComponent.searchDebounce">\n    </ion-searchbar>\n    <div class="ionic-selectable-message" *ngIf="selectComponent.messageTemplate">\n      <div [ngTemplateOutlet]="selectComponent.messageTemplate">\n      </div>\n    </div>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <div class="ionic-selectable-spinner" *ngIf="selectComponent._isSearching">\n    <div class="ionic-selectable-spinner-background"></div>\n    <ion-spinner></ion-spinner>\n  </div>\n  <ion-list no-margin *ngIf="!selectComponent.hasVirtualScroll && selectComponent._hasFilteredItems">\n    <ion-item-group *ngFor="let group of selectComponent._filteredGroups" class="ionic-selectable-group">\n      <ion-item-divider *ngIf="selectComponent._hasGroups" [color]="selectComponent.groupColor ? selectComponent.groupColor : null">\n        \x3c!-- Use span for groupTemplate to preserve Ionic ellipsis styles. --\x3e\n        <span *ngIf="selectComponent.groupTemplate" [ngTemplateOutlet]="selectComponent.groupTemplate"\n          [ngTemplateOutletContext]="{ group: group }">\n        </span>\n        <span *ngIf="!selectComponent.groupTemplate">\n          {{group.text}}\n        </span>\n        <div *ngIf="selectComponent.groupRightTemplate" item-right>\n          <div [ngTemplateOutlet]="selectComponent.groupRightTemplate"\n            [ngTemplateOutletContext]="{ group: group }">\n          </div>\n        </div>\n      </ion-item-divider>\n      <button ion-item detail-none *ngFor="let item of group.items" (click)="_select(item)"\n        class="ionic-selectable-item" [ngClass]="{\n          \'ionic-selectable-item-is-selected\': selectComponent._isItemSelected(item),\n          \'ionic-selectable-item-is-disabled\': selectComponent._isItemDisabled(item)\n        }"\n        [disabled]="selectComponent._isItemDisabled(item)">\n        <ion-icon [name]="selectComponent._isItemSelected(item) ? \'checkmark-circle\' : \'radio-button-off\'"\n          [color]="selectComponent._isItemSelected(item) ? \'primary\' : \'daek\'"\n          item-left>\n        </ion-icon>\n        \x3c!-- Use span for itemTemplate to preserve Ionic ellipsis styles. --\x3e\n        <span *ngIf="selectComponent.itemTemplate" [ngTemplateOutlet]="selectComponent.itemTemplate"\n          [ngTemplateOutletContext]="{ item: item }">\n        </span>\n        <span *ngIf="!selectComponent.itemTemplate">\n          {{selectComponent._formatItem(item)}}\n        </span>\n        <div *ngIf="selectComponent.itemRightTemplate" item-right>\n          <div [ngTemplateOutlet]="selectComponent.itemRightTemplate"\n            [ngTemplateOutletContext]="{ item: item }">\n          </div>\n        </div>\n        <button *ngIf="selectComponent.canSaveItem" class="ionic-selectable-item-button"\n          ion-button icon-only item-end outline (click)="selectComponent._saveItem($event, item)">\n          <ion-icon name="md-create"></ion-icon>\n        </button>\n        <button *ngIf="selectComponent.canDeleteItem" class="ionic-selectable-item-button"\n          ion-button icon-only item-end outline (click)="selectComponent._deleteItemClick($event, item)">\n          <ion-icon name="md-trash"></ion-icon>\n        </button>\n      </button>\n    </ion-item-group>\n  </ion-list>\n  \x3c!-- Fail text should be above InfiniteScroll to avoid a gap when no items are found. --\x3e\n  <div *ngIf="!selectComponent._hasFilteredItems">\n    <span *ngIf="selectComponent.searchFailTemplate" [ngTemplateOutlet]="selectComponent.searchFailTemplate">\n    </span>\n    <div *ngIf="!selectComponent.searchFailTemplate" margin>\n      {{selectComponent.searchFailText}}\n    </div>\n  </div>\n  <ion-infinite-scroll *ngIf="!selectComponent.hasVirtualScroll" [enabled]="selectComponent.hasInfiniteScroll"\n    (ionInfinite)="_getMoreItems($event)">\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n  <ion-list no-margin *ngIf="selectComponent.hasVirtualScroll && selectComponent._hasFilteredItems"\n    [virtualScroll]="selectComponent._filteredGroups[0].items"\n    [approxItemHeight]="selectComponent.virtualScrollApproxItemHeight"\n    [approxItemWidth]="selectComponent.virtualScrollApproxItemWidth"\n    [bufferRatio]="selectComponent.virtualScrollBufferRatio" [headerFn]="selectComponent.virtualScrollHeaderFn">\n    <ion-item-divider *virtualHeader="let header" [color]="selectComponent.groupColor ? selectComponent.groupColor : null">\n      {{header}}\n    </ion-item-divider>\n    <button ion-item detail-none *virtualItem="let item" (click)="_select(item)"\n      class="ionic-selectable-item" [ngClass]="{\n        \'ionic-selectable-item-is-selected\': selectComponent._isItemSelected(item),\n        \'ionic-selectable-item-is-disabled\': selectComponent._isItemDisabled(item)\n      }"\n      [disabled]="selectComponent._isItemDisabled(item)">\n      <ion-icon [name]="selectComponent._isItemSelected(item) ? \'checkmark-circle\' : \'radio-button-off\'"\n        [color]="selectComponent._isItemSelected(item) ? \'primary\' : \'daek\'"\n        item-left>\n      </ion-icon>\n      \x3c!-- Use span for itemTemplate to preserve Ionic ellipsis styles. --\x3e\n      <span *ngIf="selectComponent.itemTemplate" [ngTemplateOutlet]="selectComponent.itemTemplate"\n        [ngTemplateOutletContext]="{ item: item }">\n      </span>\n      <span *ngIf="!selectComponent.itemTemplate">\n        {{selectComponent._formatItem(item)}}\n      </span>\n      <div *ngIf="selectComponent.itemRightTemplate" item-right>\n        <div [ngTemplateOutlet]="selectComponent.itemRightTemplate"\n          [ngTemplateOutletContext]="{ item: item }">\n        </div>\n      </div>\n      <button *ngIf="selectComponent.canSaveItem" class="ionic-selectable-item-button"\n        ion-button icon-only item-end outline (click)="selectComponent._saveItem($event, item)">\n        <ion-icon name="md-create"></ion-icon>\n      </button>\n      <button *ngIf="selectComponent.canDeleteItem" class="ionic-selectable-item-button"\n        ion-button icon-only item-end outline (click)="selectComponent._deleteItemClick($event, item)">\n        <ion-icon name="md-trash"></ion-icon>\n      </button>\n    </button>\n  </ion-list>\n</ion-content>\n<div class="ionic-selectable-add-item-template" *ngIf="selectComponent._isAddItemTemplateVisible"\n  [ngStyle]="{ \'top.px\': _header.offsetHeight }">\n  <span [ngTemplateOutlet]="selectComponent.addItemTemplate"\n    [ngTemplateOutletContext]="{ item: selectComponent._itemToAdd, isAdd: selectComponent._itemToAdd === null }">\n  </span>\n</div>\n<ion-footer *ngIf="selectComponent._footerButtonsCount > 0" [ngStyle]="{ \'visibility\': selectComponent._isFooterVisible ? \'initial\' : \'hidden\' }">\n  <ion-toolbar>\n    <ion-row>\n      <ion-col *ngIf="selectComponent.canClear" [attr.col-4]="selectComponent._footerButtonsCount === 3 ? \'\' : null"\n        [attr.col-6]="selectComponent._footerButtonsCount === 2 ? \'\' : null"\n        [attr.col-12]="selectComponent._footerButtonsCount === 1 ? \'\' : null">\n        <button ion-button full no-margin (click)="_clear()" [disabled]="!selectComponent._selectedItems.length">\n          {{selectComponent.clearButtonText}}\n        </button>\n      </ion-col>\n      <ion-col *ngIf="selectComponent.canAddItem" [attr.col-4]="selectComponent._footerButtonsCount === 3 ? \'\' : null"\n        [attr.col-6]="selectComponent._footerButtonsCount === 2 ? \'\' : null"\n        [attr.col-12]="selectComponent._footerButtonsCount === 1 ? \'\' : null">\n        <button ion-button full no-margin (click)="selectComponent._addItemClick()">\n          {{selectComponent.addButtonText}}\n        </button>\n      </ion-col>\n      <ion-col *ngIf="selectComponent.isMultiple || selectComponent.hasOkButton"\n        [attr.col-4]="selectComponent._footerButtonsCount === 3 ? \'\' : null"\n        [attr.col-6]="selectComponent._footerButtonsCount === 2 ? \'\' : null"\n        [attr.col-12]="selectComponent._footerButtonsCount === 1 ? \'\' : null">\n        <button ion-button full no-margin (click)="_ok()" [disabled]="!selectComponent.isOkButtonEnabled">\n          {{selectComponent.okButtonText}}\n        </button>\n      </ion-col>\n    </ion-row>\n  </ion-toolbar>\n</ion-footer>\n'}]}],IonicSelectablePageComponent.ctorParameters=(()=>[{type:NavParams},{type:ElementRef}]),IonicSelectablePageComponent.propDecorators={_cssClass:[{type:HostBinding,args:["class.ionic-selectable-page"]}],_canClearCssClass:[{type:HostBinding,args:["class.ionic-selectable-page-can-clear"]}],_isMultipleCssClass:[{type:HostBinding,args:["class.ionic-selectable-page-is-multiple"]}],_isSearchingCssClass:[{type:HostBinding,args:["class.ionic-selectable-page-is-searching"]}],_isAddItemTemplateVisibleCssClass:[{type:HostBinding,args:["class.ionic-selectable-page-is-add-item-template-visible"]}],_isIos:[{type:HostBinding,args:["class.ionic-selectable-page-ios"]}],_isMD:[{type:HostBinding,args:["class.ionic-selectable-page-md"]}],_searchbarComponent:[{type:ViewChild,args:["searchbarComponent"]}],_content:[{type:ViewChild,args:[Content]}]};let components=[IonicSelectableComponent,IonicSelectablePageComponent],directives=[IonicSelectableValueTemplateDirective,IonicSelectableItemTemplateDirective,IonicSelectableItemRightTemplateDirective,IonicSelectableTitleTemplateDirective,IonicSelectablePlaceholderTemplateDirective,IonicSelectableMessageTemplateDirective,IonicSelectableGroupTemplateDirective,IonicSelectableGroupRightTemplateDirective,IonicSelectableCloseButtonTemplateDirective,IonicSelectableSearchFailTemplateDirective,IonicSelectableAddItemTemplateDirective];class IonicSelectableModule{}IonicSelectableModule.decorators=[{type:NgModule,args:[{imports:[CommonModule,IonicPageModule.forChild(IonicSelectableComponent),IonicPageModule.forChild(IonicSelectablePageComponent)],declarations:[...components,...directives],exports:[...components,...directives],entryComponents:components}]}],IonicSelectableModule.ctorParameters=(()=>[]);export{IonicSelectableAddItemTemplateDirective,IonicSelectableCloseButtonTemplateDirective,IonicSelectableGroupRightTemplateDirective,IonicSelectableGroupTemplateDirective,IonicSelectableItemRightTemplateDirective,IonicSelectableItemTemplateDirective,IonicSelectableMessageTemplateDirective,IonicSelectablePageComponent,IonicSelectablePlaceholderTemplateDirective,IonicSelectableSearchFailTemplateDirective,IonicSelectableTitleTemplateDirective,IonicSelectableValueTemplateDirective,IonicSelectableComponent,IonicSelectableModule};