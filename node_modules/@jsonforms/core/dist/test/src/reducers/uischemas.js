"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const maxBy_1 = __importDefault(require("lodash/maxBy"));
const remove_1 = __importDefault(require("lodash/remove"));
const actions_1 = require("../actions");
const __1 = require("..");
exports.uischemaRegistryReducer = (state = [], action) => {
    switch (action.type) {
        case actions_1.ADD_UI_SCHEMA:
            return state
                .slice()
                .concat({ tester: action.tester, uischema: action.uischema });
        case actions_1.REMOVE_UI_SCHEMA:
            const copy = state.slice();
            remove_1.default(copy, entry => entry.tester === action.tester);
            return copy;
        default:
            return state;
    }
};
exports.findMatchingUISchema = (state) => (jsonSchema, schemaPath, path) => {
    const match = maxBy_1.default(state, entry => entry.tester(jsonSchema, schemaPath, path));
    if (match !== undefined &&
        match.tester(jsonSchema, schemaPath, path) !== __1.NOT_APPLICABLE) {
        return match.uischema;
    }
    return undefined;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWlzY2hlbWFzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3JlZHVjZXJzL3Vpc2NoZW1hcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHlEQUFpQztBQUNqQywyREFBbUM7QUFDbkMsd0NBS29CO0FBQ3BCLDBCQUFpRTtBQVVwRCxRQUFBLHVCQUF1QixHQUFHLENBQ3JDLFFBQWlFLEVBQUUsRUFDbkUsTUFBbUMsRUFDbkMsRUFBRTtJQUNGLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRTtRQUNuQixLQUFLLHVCQUFhO1lBQ2hCLE9BQU8sS0FBSztpQkFDVCxLQUFLLEVBQUU7aUJBQ1AsTUFBTSxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ2xFLEtBQUssMEJBQWdCO1lBQ25CLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUMzQixnQkFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RELE9BQU8sSUFBSSxDQUFDO1FBQ2Q7WUFDRSxPQUFPLEtBQUssQ0FBQztLQUNoQjtBQUNILENBQUMsQ0FBQztBQUVXLFFBQUEsb0JBQW9CLEdBQUcsQ0FDbEMsS0FBOEQsRUFDOUQsRUFBRSxDQUFDLENBQ0gsVUFBc0IsRUFDdEIsVUFBa0IsRUFDbEIsSUFBWSxFQUNLLEVBQUU7SUFDbkIsTUFBTSxLQUFLLEdBQUcsZUFBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxDQUNqQyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQzNDLENBQUM7SUFDRixJQUNFLEtBQUssS0FBSyxTQUFTO1FBQ25CLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsS0FBSyxrQkFBYyxFQUM3RDtRQUNBLE9BQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQztLQUN2QjtJQUNELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUMsQ0FBQyJ9